#### 配置tomcat内存大小

Tomcat本身不能直接在计算机上运行，需要依赖于硬件基础之上的操作系统和一个java虚拟机。JAVA程序启动时JVM都会分配一个初始内存和最大内存给这个应用程序。这个初始内存和最大内存在一定程度都会影响程序的性能。比如说在应用程序用到最大内存的时候，JVM是要先去做垃圾回收的动作，释放被占用的一些内存。所以想调整Tomcat的启动时初始内存和最大内存就需要向JVM声明，一般的JAVA程序在运行都可以通过中-Xms -Xmx来调整应用程序的初始内存和最大内存:

这两个值的大小一般根据需要进行设置。初始化堆的大小执行了虚拟机在启动时向系统申请的内存的大小。一般而言，这个参数不重要。但是有的应用程序在大负载的情况下会急剧地占用更多的内存，此时这个参数就是显得非常重要，如果虚拟机启动时设置使用的内存比较小而在这种情况下有许多对象进行初始化，虚拟机就必须重复地增加内存来满足使用。由于这种原因，我们一般把-Xms和-Xmx设为一样大，而堆的最大值受限于系统使用的物理内存。一般使用数据量较大的应用程序会使用持久对象，内存使用有可能迅速地增长。当应用程序需要的内存超出堆的最大值时虚拟机就会提示内存溢出，并且导致应用服务崩溃。因此一般建议堆的最大值设置为可用内存的最大值的80%。

````
（1）直接设置tomcat

　　Linux

　　修改TOMCAT_HOME/bin/catalina.sh 
　　位置cygwin=false前。
　　JAVA_OPTS="-server -Xms256m -Xmx512m -XX:PermSize=64M -XX:MaxPermSize=128m" （仅做参考，具体数值根据自己的电脑内存配置）

　　windows

　　修改TOMCAT_HOME/bin/catalina.bat 
　　第一行加上
　　JAVA_OPTS="-server -Xms256m -Xmx512m -XX:PermSize=64M -XX:MaxPermSize=128m" 

（2）配置环境变量

　　环境变量中设     变量名：JAVA_OPTS     变量值：-Xms512m   -Xmx512m
````

select   *   from   table  where 1 = 0



数据仓库更偏向于数据分析，



copy table dataclo1,datacol2... from  from stdin null as  ''   解决了一条一条插入数据的问题，改为以流的方式插入数据

```  
dataset.foreachPartition  解决了单机存储数据的问题，改为了多台机器去存储数据
```

 1   2   3 

4    5   

select  * from table1 where  col1 = ".."



泉州是8台机器   512G     192核



miner 能用是750G  38核

1000w ~ 5000W数据量    驱动器调为8~12G   执行者数量10~12个   执行者内存10~12G  执行者内核2核  一共只用到20核核     

驱动器内存 + 执行者数量*（执行者内存+1）

去读取或存储数据的话 就会获取20个连接     泉州的gp很难承受一次性一个账号去申请30个连接及其以上

5000W到1T的话，  驱动器一般设置为20G，执行者数量会设置为20个以上40个一下，内存一般设置为20G以上，40G一下，内核是2核。

